# [Platinum IV] 무자비한 최단 경로 - 25500

[문제 링크](https://www.acmicpc.net/problem/25500)

### 문제 요약

<p>각 정점들의 3차원 위치 좌표가 주어진다. 이때, 이들로 형성 되는 그래프에서 1번 정점으로부터 다른 모든 정점으로의 최단 경로를 구해보자. </p>

### 제한

TL : 2sec, ML : 1024 MB

$1 ≤ N, K ≤ 200,000$

$0 ≤ x, y, z ≤ 1,000,000,000$

### 성능 요약

메모리: 44764 KB, 시간: 396 ms

### 분류

그래프 이론(graphs), 다익스트라(dijkstra)


### comment

약 4달 전에 뉴비에서 갓 진화하던 시절에 풀었던 문제다.

$x, y$ 좌표에 대한 처리는 [이 문제](https://www.acmicpc.net/problem/2887)를 풀었다면 어렵지 않게 해결할 수 있다. 그러나 문제 지문의 $z$좌표의 처리를 설명하는 부분을 보고 머리가 띵했다.

다양한 삽질을 해봐도 마땅한 방법을 찾지 못했고, 결국 pjshwa(알청갓..)님의 조언으로 z에 대한 대략적인 처리 방향을 잡았다.

바로 '가상의 정점'을 활용하는 것이다.

(나는 $z$에 대한 처리를 처음 정점에 대한 좌표 입력을 받으면서 동시에 진행했다. 이후 $x, y$에 대한 처리와 다익스트라는 별다른 설명이 필요치 않으므로 생략)


-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

각 정점별로 $K$로 나눈 나머지값에 따라 가상의 정점을 둔다.(기존 $1, 2, ... N$의 정점과 혼동을 방지하기 위해 $N + 1, N + 2, ...$와 같이 세팅해 주자)
  
이때 임의의 정점에 대해 두 개의 간선이 생기게 된다.(가상의 정점으로 들어가는 간선과, 기존 정점으로 들어가는 간선)

임의의 정점 $V$에 대해 $r1 = V mod K$ 라 하자.

이후 정점 $V$에서 가상의 정점 ( $N + 1 + r1$ )로 향하는 가중치 $Z(V)$ 간선을 만든다.

반대로 $K - r1$에 대해 $r2 = (K - r1) mod K$라 하자.

이후 가상의 정점( $N + 1 + r2$ )에서 정점 $V$로 향하는 가중치 $Z(V)$ 간선을 만든다.

위 처리를 모든 정점( $1, 2, ... N$ )에 대해 진행해 준 뒤 $x, y$ 에 대한 처리 후 우리가 알고 있는 다익스트라를 돌려주면 최종적으로 모든 거리 테이블이 완성된다.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

++이후 찾아보니 위에서 z에 대한 처리 방식은 [이 문제](https://www.acmicpc.net/problem/5214)에서의 핵심 아이디어였던 것이었다.

(위의 z처리 과정이 잘 와닿지 않는다면 이 문제를 먼저 선행하고 오는 것도 좋아 보인다.)
