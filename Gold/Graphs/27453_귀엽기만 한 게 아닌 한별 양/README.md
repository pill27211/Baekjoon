# [Gold II] 귀엽기만 한 게 아닌 한별 양 - 27453

[문제 링크](https://www.acmicpc.net/problem/27453)

### 문제 요약

<p> $N * M$의 맵에서 가장 최근 지나온 $3$ 개 이하 칸에 있는 불상사의 개수 합이 $K$ 이하가 되게 이동하려 한다. 학교에서 집으로 가는 최단 거리를 구해보자. </p>

### 제한

TL : 1.5sec, ML : 1024 MB

$2 ≤ N, M ≤ 1,000$

$0 ≤ K ≤ 27$

### 성능 요약

메모리: 14840 KB, 시간: 332 ms

### 분류

그래프 이론(graphs), 그래프 탐색(graph_traversal), 너비 우선 탐색(bfs)

### comment

재밌는 bfs 응용 문제였다.

우선 불상사 합이 $K$를 넘는지에 대한 여부는 이전 위치의 정보를 들고 있으면 간단히 처리할 수 있다.

방문 처리에 있어서 다소 까다롭게 느낄 수 있을텐데, "방향에 대한 방문 처리를 하자" 라는 생각이 들었다면 이미 문제를 다 푼 것이나 다름 없다.

지점 간 불상사 합을 간편히 계산하기 위하여 map( $D[]$ )을 이용하였다.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

위 발상을 떠올렸다면 사실 단순 bfs라 설명할 것도 없긴 한데..

이전 지점, 현재 지점, 다음 지점을 각각 $P1, P2, P3$ 이라 할 때 다음의 과정을 거치자.

* 큐에서 5개의 정보를 관리하자. ( $P2_y, P2_x, P1_y, P1_x, distance$ )
* $M[P2_y][P2_x]$ -> $H$ 면 $distance$ 출력 후 종료.
* $P2$로부터 4개의 방향 $d_i$에 대해 해당 방향으로 이동한 적이 없고, $P3$ ^ $P1$이며 $D[P1] + D[P2] + D[P3] ≤ K$를 만족하면 그 지점으로의 탐색을 진행한다.

