
# [Gold II] 케익 배달 - 2159

[문제 링크](https://www.acmicpc.net/problem/2159)

### 문제 요약

<p> 2차원 맵 상에 시작 위치 및 N개의 위치가 주어진다. 해당 위치 || 해당 위치의 상, 하, 좌, 우 중 한 곳에만 도착해도 될 때, 순서대로 이동하는 데에 거치는 최소 거리를 구해보자. </p>

### 제한

TL : 2sec, ML : 128 MB

1 ≤ N, X, Y ≤ 100,000

주어지는 위치는 중복될 수 있다.

### 성능 요약

메모리: 15960 KB, 시간: 60 ms

### 분류

다이나믹 프로그래밍(dp)

### comment

처음 보고 꽤 생각을 했었지만, 이동을 주어진 '순서대로' 한다는 것에서 확신을 얻었다.

dp[i][j] : i번째 위치의 j번 방향을 거쳐갈 때, 남은 모든 위치를 이동하는 최단 거리.

단, j = {0 : 해당 위치, 1 : 상, 2 : 하, 3 : 좌, 4 : 우}

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

4개의 파라미터(u : 이동해야할 위치, w : 현재 방향, p : 현재 y좌표, q : 현재 x좌표) 를 관리하자.

최초 호출은 (1, 0, {시작 좌표}) 로 호출된다.

기저 조건은 당연히 모든 이동을 끝냈을 때. -> u > n

다음 상태 전이를 함에 있어서 한가지 주의해야 할 점이 있는데, 상하좌우 4방향만 고려해야할 것이 아니라 제자리 또한 고려해야 한다는 것이다. (주어지는 위치에 중복이 있을 수 있으므로)

따라서 다음 이동할 좌표(a[u], b[u]) 를 기준으로 dy[0 ~ 4], dx[0 ~ 4] 의 경우를 다 돌아보며 최솟값을 찾아주면 된다.

이동 시 발생하는 비용은 2차원 맵 + 상하좌우 이동 이므로 각 좌표간 차이에 절댓값을 씌워주면 된다.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

풀이 후 기여 탭에 들어가 봤는데 다익스트라 태그가 있어서 놀랐었다.

생각해보니 주어지는 위치마다 5개의 정점으로 분할해 본다면, 나름 일리가 있는 풀이인 것 같다.
