# [Gold III] 두 단계 최단 경로 3 - 23807

[문제 링크](https://www.acmicpc.net/problem/23807)

### 문제 요약

<p> $N$개의 정점으로 이루어진 무향 그래프와 $P$개의 정점이 주어진다. $P$개의 정점 중 최소 세 개의 정점을 반드시 포함해야 할 때, 출발점에서 도착점으로 가는 최단 거리를 구해보자. </p>

### 제한

TL : 1sec, ML : 256 MB

$10 ≤ N ≤ 100,000$

$10 ≤ M ≤ 300,000$

$1 ≤ w ≤ 1,000,000$

$3 ≤ P ≤ min(100, N - 3)$

### 성능 요약

메모리: 94468 KB, 시간: 2892 ms

### 분류

그래프 이론(graphs), 다익스트라(dijkstra), 브루트포스(bruteforcing)

### comment

결국 우리가 구해야 하는 건 $P$개의 정점 중 임의의 정점 $P_1$, $P_2$, $P_3$에 대해

$min(D[start][P_1]$ $+$ $D[P_1][P_2]$ $+$ $D[P_2][P_3]$ $+$ $D[P_3][end])$ 를 구하는 것이다.

살짝 당황스럽지만, 시간 제한과 $P$의 범위를 보면 쉽게 해결 방법을 떠올릴 수 있다.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

$P$개의 모든 정점들에 대해 다익스트라를 돌려준 뒤 $P * N$개의 거리 테이블을 채워넣자.

이후 $P$개의 정점에서 $3$개의 정점을 뽑아 보는 순열로 생각해 볼 수 있다.

처음에 조합으로 짜보려다, $P_1$, $P_2$, $P_3$을 나열하는 순서에 따라 값이 달라지므로 모든 경우를 고려하기 위해 순열로 접근 하였다.

<del> 말이 좋아 순열이지, 그냥 3중 반복문을 박아버리자. </del>
