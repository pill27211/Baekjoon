# [Platinum I] Poklon - 14413

[문제 링크](https://www.acmicpc.net/problem/14413)

### 문제 요약

<p> 길이가 N인 수열이 주어지고, Q개의 구간 단위 쿼리가 주어진다. 이때 각 쿼리에 대해 해당 구간에 정확히 2번 나타나는 수의 개수를 세보자. </p>

### 제한

TL : 5sec, ML : 512 MB

1 ≤ N, Q ≤ 500,000

1 ≤ i ≤ 1,000,000,000

1 ≤ l ≤ r ≤ N

### 성능 요약

메모리: 15708 KB, 시간: 872 ms

### 분류

mo's(mo's algorithm), 오프라인 쿼리(offline query), 값 / 좌표 압축(coordinate_compression), 

### comment

수의 범위를 보면 바로 카운팅 배열을 적용 하기에 무리가 있어 보인다. 좌표 압축을 진행해주자.

이후 루트 단위 버킷에 따라 정렬 후 차례대로 쿼리들을 오프라인 상에서 처리해보자.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

문제에선 임의의 구간에 대해 '정확히 2번 나타나는 수의 개수'를 카운트 하라고 하였다.

어떤 수를 카운팅할 때, 뺄 때에 대해 나눠서 생각해보자.

만약 어떤 수를 카운팅 한다면 우리가 염두할 상황은 두가지밖에 없다.

* 해당 수의 카운트 수가 정확히 2가 되는 순간 (1 -> 2)
* 해당 수의 카운트 수가 2에서 넘어가는 순간 (2 -> 3)

그럼 반대로 어떤 수를 뺄 때는 ?

* 해당 수의 카운트 수가 정확히 2가 되는 순간 (3 -> 2)
* 해당 수의 카운트 수가 2에서 떨어지는 순간 (2 -> 1)

각 구간 쿼리를 처리하면서 위 사항들에 대해 적절히 temp값을 컨트롤 해 주어 답을 찾아주면 된다.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

추가로 언급이 필요한 별다른 내용은 딱히 없으므로 끝.

아 그리고 mo's 문제를 왜 자료구조 분류에 썻는지는 나도 잘 모르겠다. (?)
