# [Gold II] 트리와 수열 - 26159

[문제 링크](https://www.acmicpc.net/problem/26159)

### 문제 요약

<p> 트리를 구성하는 $N - 1$개의 간선에 대해 입력되는 수열로 새로이 가중치를 메길 때, $min(Σdist(i, j))$ $mod$ $1000000007$의 값을 구해보자.   </p>

### 제한

TL : 1sec, ML : 256 MB

$2 ≤ N ≤ 100,000$

$1 ≤ a_i ≤ 10^9$

### 성능 요약

메모리: 11440 KB, 시간: 72 ms

### 분류

트리(trees), 다이나믹 프로그래밍(dp), 트리에서의 다이나믹 프로그래밍(dp_tree), 깊이 우선 탐색(dfs), 정렬(sorting)

### comment

우선 척보면 드는 생각이 가장 말단, 그러니까 가장 인기가 없는 간선일수록 큰 가중치를 부여하면 되지 않을까 ? 이다.

즉, 존재하는 모든 $(i, j)$쌍에 대해 각 간선마다 이용되는 횟수를 $dp[1], dp[2], ... dp[n]$이라 하고

입력되는 수열을 $a_1, a_2, ... a_n$라 하자.

그럼 우리가 찾는 답은 $dp[n]$ 가 단조 감소, $a_n$가 단조 증가 할 때

$Σ(dp[i] * a[i])$ $mod$ $1000000007$ 의 값이라고 할 수 있다.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

$dp[]$를 어떻게 채울 수 있을까 ?

임의의 정점 $i$에 대해 $i$와 그 서브 트리를 이루는 정점의 개수를 $S[i]$라 하자.

그럼 $i$와 $i$의 부모 정점을 잇는 간선을 이용하는 횟수는 $S[i] * (n - S[i])$로 구할 수 있다.

따라서 트리dp로 $S[]$를 채운 후 $dp[]$를 순회하면 $O(N)$으로 작업을 마칠 수 있다.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

위에서 " $dp[n]$ 가 단조 감소, $a_n$가 단조 증가 할 때 " 로 정리했다.

이는 결국 각각에 대해 $greater$, $less$로 정렬해주면 되므로, $O(NlogN)$으로 문제를 해결할 수 있다.
