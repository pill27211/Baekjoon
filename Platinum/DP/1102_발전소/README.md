
# [Platinum V] 발전소 - 1102

[문제 링크](https://www.acmicpc.net/problem/1102)

### 문제 요약

<p> 각 발전소들의 재시작 비용 관계와 고장 상태가 주어진다. 이때 적어도 P개의 발전소가 고장나 있지 않도록하는 비용의 최솟값을 구해보자. </p>

### 제한

TL : 2sec, ML : 128 MB

1 ≤ N ≤ 16

0 ≤ P ≤ N

0 ≤ N_i ≤ 36

### 성능 요약

메모리: 2280 KB, 시간: 20 ms

### 분류

다이나믹 프로그래밍(dp), 비트마스킹(bitmask), 비트필드를 이용한 다이나믹 프로그래밍(dp_bitfield)

### comment

다소 까다롭다고 느낄 수 있는 문제이다.

우선 최초 각 발전소들의 고장 상태가 입력으로 주어지므로 고장나지 않은 발전소들을 비트로 담아둠(u)과 동시에 카운트(c) 해주자.

이때 특히 다음의 조건을 되새김 해보자.

* 발전소를 고치는 것은 "고장나지 않은" 발전소에서 "고장난" 발전소를 대상으로 행해진다.
* "적어도 P개의 발전소가 고장나 있지 않도록"
* 0 ≤ P ≤ N

물론 다른 조건들도 중요하지만 위 조건을 흘려 넘기면 바로 틀려버릴 수 있다.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

발전소를 고치는 것은 "고장나지 않은" 발전소에서 "고장난" 발전소를 대상으로 행해진다.

-> 애초에 고장나지 않은 발전소가 하나도 없다면 ? 아무것도 고칠 수 없다.

"적어도 P개의 발전소가 고장나 있지 않도록"

-> 어떤 순간이던 현재 고장나 있지 않은 발전소의 개수가 P개 이상이기만 하면 된다. 즉, 최초 각 발전소들의 고장 상태에서 이미 P개 이상일수도 있다. (이때 비용은 당연히 0이 되겠다)

 0 ≤ P ≤ N

-> P가 0일수도 있음에 주목하자. 위 첫번째 조건에서 고장나지 않은 발전소가 없지만 P가 0이면 출력값은 -1이 아닌 0이 되어야 한다.

이상 위 조건들을 적절히 정리해 -1이 출력될 수밖에 없는 상황과 그렇지 않은 상황을 잘 분기해주자.

------------------------------------------------------------------------------------------------------------------------------------------------------------------------

이제 가장 처음 값을 특정한 u와 c를 시작으로 비트dp를 진행하며 정답을 찾아보자.

다른 기본 비트dp 문제들에선 각 i가 하나의 사건으로만 이어졌었다. 하지만 이 문제에선 하나의 i를 이용해 모든 사건을 해결할 수 있다.

따라서 이 점을 모두 고려해보기 위해 비트dp를 진행할 때 2중 for문을 사용해 주자. (고장나지 않은 임의의 발전소 i에서부터 고장난 모든 발전소로 뻗어지는 가능성을 고려해보자)

그렇게 최소 비용이 되는 값을 찾아주면 끝.
